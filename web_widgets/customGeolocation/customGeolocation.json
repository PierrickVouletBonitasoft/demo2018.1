{"designerVersion":"1.4.26","id":"customGeolocation","name":"Geolocation","lastUpdate":1490820398454,"template":"<!-- The custom widget template is defined here\n   - You can use standard HTML tags and AngularJS built-in directives, scope and interpolation system\n   - Custom widget properties defined on the right can be used as variables in a templates with properties.newProperty\n   - Functions exposed in the controller can be used with ctrl.newFunction()\n   - You can use the 'environment' property injected in the scope when inside the Editor whiteboard. It allows to define a mockup\n     of the Custom Widget to be displayed in the whiteboard only. By default the widget is represented by an auto-generated icon\n     and its name (See the <span> below).\n-->\n \n<span ng-if=\"environment\"><identicon name=\"{{environment.component.id}}\" size=\"30\" background-color=\"[255,255,255, 0]\" foreground-color=\"[51,51,51]\"></identicon> {{environment.component.name}}</span>\n\n<div id=\"customWidgetMap\" style=\"width:400px;height:400px\"></div>","controller":"/**\n * The controller is a JavaScript function that augments the AngularJS scope and exposes functions that can be used in the custom widget template\n * \n * Custom widget properties defined on the right can be used as variables in a controller with $scope.properties\n * To use AngularJS standard services, you must declare them in the main function arguments.\n * \n * You can leave the controller empty if you do not need it.\n */\nfunction ($scope) {\n    if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(showPosition);\n    } else {\n        x.innerHTML = \"Geolocation is not supported by this browser.\";\n    }\n    \n    function showPosition(position) {\n        $scope.properties.latitude = \" \" + position.coords.latitude;\n        $scope.properties.longitude = \" \" + position.coords.longitude;\n        console.log(\"lat:\"+position.coords.latitude+\" long:\"+$scope.properties.longitude);\n\n        var mapOptions = {\n            center: new google.maps.LatLng($scope.properties.latitude, $scope.properties.longitude),\n            zoom: 14,\n            mapTypeId: google.maps.MapTypeId.MAP\n        }\n    \n        console.log(JSON.stringify(mapOptions));\n        var map = new google.maps.Map(document.getElementById(\"customWidgetMap\"), mapOptions);\n        var marker = new google.maps.Marker({\n            position: new google.maps.LatLng($scope.properties.latitude, $scope.properties.longitude),\n            map: map,\n            title: 'You are near here!'\n        });\n    }\n}","custom":true,"properties":[{"label":"Latitude","name":"latitude","type":"text","bond":"variable"},{"label":"Longitude","name":"longitude","type":"text","bond":"variable"}],"assets":[{"id":"171f1d1f-5e8a-4031-908c-cc0cb89be811","name":"https://maps.googleapis.com/maps/api/js?key=AIzaSyBxPz34Dl40ifm7R42aE1uGqcgksFktFE4","type":"js","order":1,"external":true}],"type":"widget"}